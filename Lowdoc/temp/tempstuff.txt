h3 Existing Relations
p.boldtext Subjects
- @relSubjects.each do |subject|
    p = subject["name"]


p.boldtext Links
- @relLinks.each do |link|
    p = link["name"]


    filteredProcessors.push(*(db.execute("SELECT processor_id FROM Processors_Subjects_Links_Rel WHERE 
                subject_id = ?", subject_id)[0]))
                p "TEST"
                p db.execute("SELECT processor_id FROM Processors_Subjects_Links_Rel WHERE subject_id = ?", subject_id)[0]



                 h2 = "Change who has access to your articles:"
  p = "Select processors:"
  - @processors.each do |processor|
    - if @yourProcessors.include?(processor["id"])
      p = processor["name"]
      - @users.each do |user|
        - if user["username"] != session[:username]
          input# type="checkbox" name="#{processor["id"]}" value="#{user["id"]}"/
          label for="#{user["id"]}" #{user["username"]}
          br
  br

  
    # Records related to the user
    @yourProcessorsHash = fetchUserRelatedRecords("db/lowdoc.db", "Processors", @id)
    @yourSubjectsHash = fetchUserRelatedRecords("db/lowdoc.db", "Subjects", @id)
    @yourLinksHash = fetchUserRelatedRecords("db/lowdoc.db", "Links", @id)
    @yourProcessors = []
    @yourSubjects = []
    @yourLinks = []

    # Convert hashes to arrays
    @yourProcessorsHash.each do |x|
        @yourProcessors.append(x["processor_id"])
    end
    @yourSubjectsHash.each do |x|
        @yourSubjects.append(x["processor_id"])
    end
    @yourLinksHash.each do |x|
        @yourLinks.append(x["processor_id"])
    end
    p "jfewuew"
    p @yourProcessors
    p @yourSubjects
    p @yourLinks

    
    @processors = getDBItems("db/lowdoc.db", "Processors")
    @subjects = getDBItems("db/lowdoc.db", "Subjects")
    @links = getDBItems("db/lowdoc.db", "Links")
    @users = getDBItems("db/lowdoc.db", "Users")